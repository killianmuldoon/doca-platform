apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.14.0
  labels:
    dpf.nvidia.com/component: dpf-operator-controller-manager
  name: bfbs.provisioning.dpf.nvidia.com
spec:
  group: provisioning.dpf.nvidia.com
  names:
    kind: Bfb
    listKind: BfbList
    plural: bfbs
    singular: bfb
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Bfb is the Schema for the bfbs API
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: BfbSpec defines the content of Bfb
            properties:
              bf_cfg:
                description: |-
                  Describes the bf.cfg config map which will be used for bfb installation,
                  it is passed to DMS on each BFB installation call,
                  It overwites default bf.cfg and must contain relevant DPF logic.
                type: string
              file_name:
                description: |-
                  Specifies bfb file name on the volume or
                  use CRD name in case it is omitted.
                pattern: .+\.bfb$
                type: string
              url:
                description: The url of the bfb image to download.
                pattern: ^(http|https)://.+\.bfb$
                type: string
            required:
            - url
            type: object
            x-kubernetes-validations:
            - message: Value is immutable
              rule: self == oldSelf
          status:
            description: BfbStatus defines the observed state of Bfb
            properties:
              phase:
                default: Initializing
                description: The current state of Bfb.
                enum:
                - Initializing
                - Downloading
                - Ready
                - Deleting
                - Error
                type: string
            required:
            - phase
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
