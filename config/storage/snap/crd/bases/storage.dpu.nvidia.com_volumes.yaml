---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.16.5
    helm.sh/resource-policy: keep
  name: volumes.storage.dpu.nvidia.com
spec:
  group: storage.dpu.nvidia.com
  names:
    kind: Volume
    listKind: VolumeList
    plural: volumes
    singular: volume
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: |-
          Volume represents a persistent volume on the DPU cluster.
          It maps between the tenant K8S persistent volume (PV) object on the tenant cluster into the actual volume on the DPU cluster.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: VolumeSpec defines the desired state of Volume
            properties:
              request:
                description: The capacity of the required storage space in bytes
                properties:
                  accessModes:
                    description: Contains the types of access modes required
                    items:
                      type: string
                    type: array
                  capacityRange:
                    description: The capacity of the required storage space in bytes
                    properties:
                      limit:
                        anyOf:
                        - type: integer
                        - type: string
                        pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                        x-kubernetes-int-or-string: true
                      request:
                        anyOf:
                        - type: integer
                        - type: string
                        pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                        x-kubernetes-int-or-string: true
                    type: object
                  volumeMode:
                    description: |-
                      volumeMode defines what type of volume is required by the claim.
                      Value of Filesystem is implied when not included in claim spec.
                    type: string
                type: object
              storageParameters:
                additionalProperties:
                  type: string
                description: List of storage parameters supported by the policy, values
                  are string only
                type: object
              storagePolicyParameters:
                additionalProperties:
                  type: string
                description: List of storage parameters supported by the policy, values
                  are string only
                type: object
              storagePolicyRef:
                description: Reference to the StoragePolicy object
                properties:
                  apiVersion:
                    type: string
                  kind:
                    type: string
                  name:
                    type: string
                  namespace:
                    type: string
                type: object
              volume:
                description: Describe volume information in DPU cluster
                properties:
                  accessModes:
                    items:
                      type: string
                    type: array
                  capacity:
                    anyOf:
                    - type: integer
                    - type: string
                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                    x-kubernetes-int-or-string: true
                  csiReference:
                    description: CSIReference reference to CSI object
                    properties:
                      csiDriverName:
                        type: string
                      pvcRef:
                        description: ObjectRef reference to the object
                        properties:
                          apiVersion:
                            type: string
                          kind:
                            type: string
                          name:
                            type: string
                          namespace:
                            type: string
                        type: object
                      storageClassName:
                        type: string
                    type: object
                  id:
                    type: string
                  reclaimPolicy:
                    description: PersistentVolumeReclaimPolicy describes a policy
                      for end-of-life maintenance of persistent volumes.
                    enum:
                    - Delete
                    - Retain
                    type: string
                  storageVendorName:
                    type: string
                  storageVendorPluginName:
                    type: string
                  volumeAttributes:
                    additionalProperties:
                      type: string
                    type: object
                type: object
            required:
            - request
            type: object
          status:
            description: VolumeStatus defines the observed state of Volume
            properties:
              state:
                description: The state of a Volume object
                enum:
                - InProgress
                - Available
                type: string
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
